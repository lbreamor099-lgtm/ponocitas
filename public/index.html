<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eva x - Sistema Profesional</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="/socket.io/socket.io.js"></script>
    <style>
        :root { --lila: #6a1b9a; --neon: #ea80fc; }
        body { background: #0a001a; color: white; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .cuadro-lila { background: var(--lila); border: 2px solid var(--neon); border-radius: 20px; padding: 25px; width: 90%; max-width: 400px; box-shadow: 0 0 20px var(--neon); }
        .header-img { width: 100%; border-radius: 15px; margin-bottom: 15px; }
        #seccion-espera, #panel-jefe { display: none; }
    </style>
</head>
<body>

    <div id="pantalla-registro" class="cuadro-lila text-center">
        <img id="img-portada" src="https://via.placeholder.com/400x150?text=Bienvenido+a+Eva" class="header-img">
        <h5 class="mb-3">REGISTRO DE USUARIO</h5>
        <input type="text" id="reg-nombre" class="form-control mb-2" placeholder="Nombre y Apellidos">
        <input type="text" id="reg-pais" class="form-control mb-2" placeholder="Pa√≠s y Ciudad">
        <button class="btn btn-light w-100 fw-bold" onclick="verificarAcceso()">INICIAR SESI√ìN</button>
    </div>

    <div id="seccion-espera" class="text-center">
        <h2 class="text-warning">‚è≥ ESPERA...</h2>
        <p>Tu aprobaci√≥n del administrador est√° pendiente.</p>
    </div>

    <div id="panel-jefe" class="cuadro-lila">
        <h4 class="text-warning text-center">üïπÔ∏è MANDO EVA X</h4>
        <div id="lista-peticiones" class="mb-3 small">Sin solicitudes...</div>
        <hr>
        <button class="btn btn-danger w-100" onclick="alert('Sala Cerrada')">üîí CERRAR GRUPO</button>
    </div>

    <script>
        const socket = io();
        let modoJefe = false;

        function verificarAcceso() {
            const nombre = document.getElementById('reg-nombre').value;
            
            // ESCRIBE AQU√ç TU CLAVE PERSONAL
            if(nombre === "TU_CLAVE_AQUI") { 
                modoJefe = true;
                document.getElementById('pantalla-registro').style.display = 'none';
                document.getElementById('panel-jefe').style.display = 'block';
            } else {
                document.getElementById('pantalla-registro').style.display = 'none';
                document.getElementById('seccion-espera').style.display = 'block';
                socket.emit('registro', { nombre: nombre });
            }
        }

        socket.on('peticion_acceso', (lista) => {
            if(modoJefe) {
                const div = document.getElementById('lista-peticiones');
                div.innerHTML = '<h6>SOLICITUDES:</h6>';
                lista.forEach(u => {
                    div.innerHTML += `<div class="d-flex justify-content-between mb-2">
                        <span>${u.nombre}</span>
                        <button class="btn btn-success btn-sm" onclick="socket.emit('aprobar_usuario', '${u.id}')">OK</button>
                    </div>`;
                });
            }
        });
    </script>
</body>
</html>
